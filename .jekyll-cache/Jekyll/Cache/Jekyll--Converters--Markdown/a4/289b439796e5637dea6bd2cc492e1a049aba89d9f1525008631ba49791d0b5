I"IÄ<h3 id="å¯¼å…¥ç›¸å…³åº“">å¯¼å…¥ç›¸å…³åº“</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
</code></pre></div></div>

<h3 id="è¯»å–æ•°æ®">è¯»å–æ•°æ®</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">base_dir</span> <span class="o">=</span> <span class="s">'data/'</span>
<span class="n">train_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">base_dir</span><span class="o">+</span><span class="s">'train.json'</span><span class="p">)</span>
<span class="n">test_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="n">base_dir</span><span class="o">+</span><span class="s">'test.json'</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="æ•°æ®æ¢ç´¢">æ•°æ®æ¢ç´¢</h3>

<h4 id="æŸ¥çœ‹åŸºæœ¬ä¿¡æ¯">æŸ¥çœ‹åŸºæœ¬ä¿¡æ¯</h4>

<h5 id="çœ‹ä¸€ä¸‹è¡¨æ ¼">çœ‹ä¸€ä¸‹è¡¨æ ¼</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">train_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div></div>
<p>ç•¥</p>

<h5 id="æŸ¥çœ‹åˆ—åä¹Ÿå°±æ˜¯åŸºæœ¬ç‰¹å¾">æŸ¥çœ‹åˆ—åï¼Œä¹Ÿå°±æ˜¯åŸºæœ¬ç‰¹å¾</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">train_df</span><span class="o">.</span><span class="n">columns</span>
<span class="n">test_df</span><span class="o">.</span><span class="n">columns</span>
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Index(['bathrooms', 'bedrooms', 'building_id', 'created', 'description',
       'display_address', 'features', 'latitude', 'listing_id', 'longitude',
       'manager_id', 'photos', 'price', 'street_address', 'interest_level'],
      dtype='object')

Index(['bathrooms', 'bedrooms', 'building_id', 'created', 'description',
       'display_address', 'features', 'latitude', 'listing_id', 'longitude',
       'manager_id', 'photos', 'price', 'street_address'],
      dtype='object')
</code></pre></div></div>

<h5 id="æŸ¥çœ‹æ•°æ®é›†çš„åŸºæœ¬ä¿¡æ¯è§‚å¯Ÿæ¯ä¸€åˆ—çš„æ•°æ®ç±»å‹">æŸ¥çœ‹æ•°æ®é›†çš„åŸºæœ¬ä¿¡æ¯ï¼Œè§‚å¯Ÿæ¯ä¸€åˆ—çš„æ•°æ®ç±»å‹</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">train_df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 49352 entries, 10 to 99994
Data columns (total 15 columns):
bathrooms          49352 non-null float64
bedrooms           49352 non-null int64
building_id        49352 non-null object
created            49352 non-null object
description        49352 non-null object
display_address    49352 non-null object
features           49352 non-null object
latitude           49352 non-null float64
listing_id         49352 non-null int64
longitude          49352 non-null float64
manager_id         49352 non-null object
photos             49352 non-null object
price              49352 non-null int64
street_address     49352 non-null object
interest_level     49352 non-null object
dtypes: float64(3), int64(3), object(9)
memory usage: 6.0+ MB
</code></pre></div></div>

<h5 id="æŸ¥çœ‹ç¼ºå¤±å€¼">æŸ¥çœ‹ç¼ºå¤±å€¼</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">train_df</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="nb">sum</span><span class="p">()</span>
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bathrooms          0
bedrooms           0
building_id        0
created            0
description        0
display_address    0
features           0
latitude           0
listing_id         0
longitude          0
manager_id         0
photos             0
price              0
street_address     0
interest_level     0
dtype: int64
</code></pre></div></div>

<p>çœ‹æ¥æ²¡æœ‰åˆ—å«æœ‰ç¼ºå¤±å€¼ï¼Œå°±ä¸ç”¨è¿›è¡Œç¼ºå¤±å€¼å¡«è¡¥äº†ã€‚</p>

<h4 id="è§‚å¯Ÿç‰¹å¾åˆ†å¸ƒåŠç‰¹å¾ä¹‹é—´çš„å…³ç³»">è§‚å¯Ÿç‰¹å¾åˆ†å¸ƒåŠç‰¹å¾ä¹‹é—´çš„å…³ç³»</h4>

<h5 id="é¦–å…ˆè§‚å¯Ÿé¢„æµ‹ç›®æ ‡interest_level-çš„åˆ†å¸ƒ">é¦–å…ˆè§‚å¯Ÿé¢„æµ‹ç›®æ ‡ï¼šâ€™interest_levelâ€™ çš„åˆ†å¸ƒ</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'interest_level'</span><span class="p">],</span> <span class="n">order</span><span class="o">=</span><span class="p">[</span><span class="s">'low'</span><span class="p">,</span> <span class="s">'medium'</span><span class="p">,</span> <span class="s">'high'</span><span class="p">])</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c98fd5c978&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_18_1_20190324213620668391.png" alt="" /></p>

<p>å¯è§å®¢æˆ·å¯¹å¤§å¤šæ•°æˆ¿å±‹çš„å…´è¶£ç”±ä½åˆ°é«˜é€’å‡ï¼Œè¿™ä¹Ÿç¬¦åˆå¸¸è¯†ï¼Œæ¯•ç«Ÿä¼˜è´¨æˆ¿æºåªå å°‘æ•°ã€‚</p>

<p>ç„¶åå¯¹åˆ†ç±»å‹æ•°æ®è¿›è¡Œç¼–ç ä¾¿äºä¹‹åçš„é¢„æµ‹å·¥ä½œ</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># æ–¹æ¡ˆä¸€
#train_df['interest'] = 0
#train_df['interest'][train_df['interest_level']=='medium'] = 1
#train_df['interest'][train_df['interest_level']=='high'] = 2
</span>
<span class="c1"># æ–¹æ¡ˆäºŒ
</span><span class="n">transfer_map</span> <span class="o">=</span> <span class="p">{</span><span class="s">'high'</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s">'medium'</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">'low'</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
<span class="n">parse</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">label</span><span class="p">:</span><span class="n">transfer_map</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>
<span class="n">train_df</span><span class="p">[</span><span class="s">'interest'</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_df</span><span class="p">[</span><span class="s">'interest_level'</span><span class="p">]</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="n">parse</span><span class="p">)</span>
</code></pre></div></div>

<p><strong>ç„¶åæ ¹æ®é¡ºåºä¾æ¬¡åˆ†æç‰¹å¾</strong></p>

<h5 id="å«ç”Ÿé—´æ•°é‡">å«ç”Ÿé—´æ•°é‡</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'bathrooms'</span><span class="p">])</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c98fdbb208&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_24_1_20190324213636426138.png" alt="" /></p>

<p>ä¸ºä»€ä¹ˆä¼šæœ‰å°æ•°æ•°é‡çš„å«ç”Ÿé—´å‘¢ï¼Ÿï¼Ÿï¼Ÿï¼Ÿåé¢åšç‰¹å¾å·¥ç¨‹çš„æ—¶å€™å¯ä»¥è€ƒè™‘å¤„ç†ä¸€ä¸‹ã€‚</p>

<p>æŸ¥çœ‹å«ç”Ÿé—´æ•°é‡å’Œå®¢æˆ·å…´è¶£ç›´æ¥çš„å…³ç³»</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="s">'low'</span><span class="p">,</span><span class="s">'medium'</span><span class="p">,</span><span class="s">'high'</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">stripplot</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'interest_level'</span><span class="p">],</span> <span class="n">train_df</span><span class="p">[</span><span class="s">'bathrooms'</span><span class="p">],</span> <span class="n">jitter</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
</code></pre></div></div>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c9902c0a58&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_27_1_20190324213822403513.png" alt="" /></p>

<p>å¯è§ï¼š</p>
<ol>
  <li>å®¢æˆ·æ›´åçˆ±å«ç”Ÿé—´æ•°åœ¨1-4ä¹‹é—´çš„æˆ¿å±‹ï¼›</li>
  <li>å¾ˆå°‘äººå–œæ¬¢æ²¡æœ‰å«ç”Ÿçš„æˆ¿å±‹ï¼›</li>
  <li>å«ç”Ÿé—´æ•°é‡å¤§äº4çš„æˆ¿å±‹å¾ˆå°‘</li>
</ol>

<p>äºæ˜¯å†ç»Ÿè®¡è¶…å‡º4ä¸ªå«ç”Ÿé—´çš„æˆ¿å±‹æ•°</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'bathrooms'</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="nb">sum</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>61
</code></pre></div></div>

<p>åªæœ‰61ä¸ªï¼Œè€Œæµ‹è¯•æ•°æ®æ€»é‡ä¸ºä¸Šä¸‡ä¸ªï¼Œå¯ä»¥å°†å…¶è§†ä¸ºç¦»ç¾¤ç‚¹ï¼Œå…¶å¾ˆæœ‰å¯èƒ½æ˜¯å™ªå£°å¹¶ä¸”å¹²æ‰°ä¹‹åçš„é¢„æµ‹ï¼Œäºæ˜¯å¯¹å…¶è¿›è¡Œå¤„ç†ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">train_df</span><span class="p">[</span><span class="s">'bathrooms'</span><span class="p">][</span><span class="n">train_df</span><span class="p">[</span><span class="s">'bathrooms'</span><span class="p">]</span><span class="o">&gt;</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>D:\Anaconda3\lib\site-packages\ipykernel_launcher.py:1: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy
  """Entry point for launching an IPython kernel.
</code></pre></div></div>

<h5 id="å§å®¤æ•°é‡">å§å®¤æ•°é‡</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'bedrooms'</span><span class="p">])</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c990305240&gt; ![](/media/editor/output_33_1_20190324213844539591.png)
</code></pre></div></div>

<p>å¯è§å¤§éƒ¨åˆ†å§å®¤æ•°é‡åœ¨0-3ä¹‹é—´</p>

<p>å†è§‚å¯Ÿå…¶ä¸å®¢æˆ·å…´è¶£çš„å…³ç³»</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="s">'low'</span><span class="p">,</span> <span class="s">'medium'</span><span class="p">,</span> <span class="s">'high'</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">stripplot</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'interest_level'</span><span class="p">],</span> <span class="n">train_df</span><span class="p">[</span><span class="s">'bedrooms'</span><span class="p">],</span> <span class="n">jitter</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c990376860&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_35_1_20190324213933598126.png" alt="" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'bedrooms'</span><span class="p">,</span> <span class="n">hue</span><span class="o">=</span><span class="s">'interest_level'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">train_df</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c9903c6240&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_36_1_20190324213958872530.png" alt="" /></p>

<p>è§‚å¯Ÿå‘ç°å®¢æˆ·æ›´åçˆ±0-2ä¸ªå§å®¤çš„æˆ¿å±‹ï¼ˆæ²¡æœ‰å§å®¤ä½ ç§Ÿæˆ¿å­å¹²å˜›ï¼Ÿï¼Ÿï¼Ÿï¼‰ï¼Œä½†æ˜¯å®¢æˆ·åå¥½å—å§å®¤æ•°é‡çš„å½±å“å¾ˆå°ã€‚</p>

<h5 id="ä»·æ ¼">ä»·æ ¼</h5>

<p>é¦–å…ˆæŸ¥çœ‹ä¸€ä¸‹ä»·æ ¼åˆ†å¸ƒ</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">train_df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">train_df</span><span class="p">[</span><span class="s">'price'</span><span class="p">],</span> <span class="s">'co'</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="o">=</span><span class="s">"Price"</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[&lt;matplotlib.lines.Line2D at 0x1c9905e6710&gt;]
</code></pre></div></div>

<p><img src="/media/editor/output_40_1_20190324214018688403.png" alt="" /></p>

<p>æ˜æ˜¾æœ‰äº›ç¦»ç¾¤ç‚¹ï¼Œè¿›è¡Œä¹‹å‰åŒæ ·çš„å¤„ç†æ–¹æ³•ã€‚</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">split</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'price'</span><span class="p">],</span> <span class="p">(</span><span class="mi">99</span><span class="p">),</span> <span class="n">interpolation</span><span class="o">=</span><span class="s">'midpoint'</span><span class="p">)</span>
<span class="n">train_df</span><span class="p">[</span><span class="s">'price'</span><span class="p">][</span><span class="n">train_df</span><span class="p">[</span><span class="s">'price'</span><span class="p">]</span><span class="o">&gt;</span><span class="n">split</span><span class="p">]</span> <span class="o">=</span> <span class="n">split</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>D:\Anaconda3\lib\site-packages\ipykernel_launcher.py:2: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy
</code></pre></div></div>

<p>ç°åœ¨å†æ¥çœ‹ä¸€ä¸‹ä»·æ ¼çš„åˆ†å¸ƒ</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'price'</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">kde</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>D:\Anaconda3\lib\site-packages\matplotlib\axes\_axes.py:6462: UserWarning: The 'normed' kwarg is deprecated, and has been replaced by the 'density' kwarg.
  warnings.warn("The 'normed' kwarg is deprecated, and has been "





&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c990633f28&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_44_2_20190324214037152449.png" alt="" /></p>

<p>å¯è§åˆ†å¸ƒæœ‰ç‚¹åç¦»ï¼Œä½¿ç”¨logæ¥å¤„ç†ä¸€ä¸‹</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="o">.</span><span class="n">distplot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log1p</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'price'</span><span class="p">]))</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>D:\Anaconda3\lib\site-packages\matplotlib\axes\_axes.py:6462: UserWarning: The 'normed' kwarg is deprecated, and has been replaced by the 'density' kwarg.
  warnings.warn("The 'normed' kwarg is deprecated, and has been "





&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c9906bc828&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_46_2_20190324214053648426.png" alt="" /></p>

<p>å†çœ‹ä»·æ ¼å’Œå®¢æˆ·å…´è¶£ç›´æ¥çš„å…³ç³»</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="s">'low'</span><span class="p">,</span> <span class="s">'medium'</span><span class="p">,</span> <span class="s">'high'</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">stripplot</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'interest_level'</span><span class="p">],</span> <span class="n">train_df</span><span class="p">[</span><span class="s">'price'</span><span class="p">],</span> <span class="n">jitter</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c99061bf28&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_48_1_20190324214116906482.png" alt="" /></p>

<p>å¾ˆæ˜æ˜¾ï¼Œå¤§å®¶éƒ½å–œæ¬¢ä»·æ ¼ä½ä¸€ç‚¹çš„æˆ¿å­ï¼Œä½†æ˜¯mediumå’Œhighåˆ†å¸ƒä¸æ˜¯å¾ˆå‡åŒ€ï¼Œäºæ˜¯ç”¨å°æç´å›¾è§‚å¯Ÿæ›´åŠ æ¸…æ™°</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="s">'low'</span><span class="p">,</span> <span class="s">'medium'</span><span class="p">,</span> <span class="s">'high'</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">'interest_level'</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s">'price'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">train_df</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c990800550&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_50_1_20190324214140257942.png" alt="" /></p>

<h5 id="listing_id">listing_id</h5>

<p>è§‚å¯Ÿå…¶ä¸å®¢æˆ·å…´è¶£çš„å…³ç³»</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="s">'low'</span><span class="p">,</span> <span class="s">'medium'</span><span class="p">,</span> <span class="s">'high'</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">stripplot</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'interest_level'</span><span class="p">],</span> <span class="n">train_df</span><span class="p">[</span><span class="s">'listing_id'</span><span class="p">],</span> <span class="n">jitter</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c99048f860&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_53_1_20190324214210359561.png" alt="" /></p>

<h5 id="åœ°ç†ä½ç½®">åœ°ç†ä½ç½®</h5>

<p>æ ¹æ®ç»çº¬åº¦æ¥è§‚å¯Ÿå®¢æˆ·åå¥½çš„æˆ¿å±‹çš„åˆ†å¸ƒ</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s">'longitude'</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s">'latitude'</span><span class="p">,</span>
    <span class="n">fit_reg</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s">'interest_level'</span><span class="p">,</span>
    <span class="n">hue_order</span><span class="o">=</span><span class="p">[</span><span class="s">'low'</span><span class="p">,</span> <span class="s">'medium'</span><span class="p">,</span> <span class="s">'high'</span><span class="p">],</span>
    <span class="n">size</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span>
    <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s">'alpha'</span><span class="p">:</span><span class="mf">0.3</span><span class="p">,</span> <span class="s">'s'</span><span class="p">:</span><span class="mi">30</span><span class="p">},</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">train_df</span>
<span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;seaborn.axisgrid.FacetGrid at 0x1c9904c0160&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_56_1_20190324214232829533.png" alt="" /></p>

<p>ç¦»ç¾¤ç‚¹å½±å“äº†è§‚å¯Ÿï¼Œå»é™¤åé‡æ–°ä½œå›¾</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">split1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'longitude'</span><span class="p">],</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">99.5</span><span class="p">),</span> <span class="n">interpolation</span><span class="o">=</span><span class="s">'midpoint'</span><span class="p">)</span>
<span class="n">split2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'latitude'</span><span class="p">],</span> <span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">99.5</span><span class="p">),</span> <span class="n">interpolation</span><span class="o">=</span><span class="s">'midpoint'</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">train_df</span><span class="p">[</span>
    <span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'longitude'</span><span class="p">]</span><span class="o">&gt;</span><span class="n">split1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;</span>
    <span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'longitude'</span><span class="p">]</span><span class="o">&lt;</span><span class="n">split1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&amp;</span>
    <span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'latitude'</span><span class="p">]</span><span class="o">&gt;</span><span class="n">split2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&amp;</span>
    <span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'latitude'</span><span class="p">]</span><span class="o">&lt;</span><span class="n">split2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">lmplot</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="s">'longitude'</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s">'latitude'</span><span class="p">,</span>
    <span class="n">fit_reg</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
    <span class="n">hue</span><span class="o">=</span><span class="s">'interest_level'</span><span class="p">,</span>
    <span class="n">hue_order</span><span class="o">=</span><span class="p">[</span><span class="s">'low'</span><span class="p">,</span> <span class="s">'medium'</span><span class="p">,</span> <span class="s">'high'</span><span class="p">],</span>
    <span class="n">size</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span>
    <span class="n">scatter_kws</span><span class="o">=</span><span class="p">{</span><span class="s">'alpha'</span><span class="p">:</span><span class="mf">0.3</span><span class="p">,</span> <span class="s">'s'</span><span class="p">:</span><span class="mi">30</span><span class="p">},</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">data</span>
<span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;seaborn.axisgrid.FacetGrid at 0x1c9907ef0f0&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_58_1_20190324214343441531.png" alt="" /></p>

<p>ä¸‹é¢çš„ä»£ç å°†åæ ‡ä¿¡æ¯ä¿å­˜ä¸º.gpxæ–‡ä»¶ï¼Œä½¿ç”¨Google Earthæ‰“å¼€å¯ä»¥æŸ¥çœ‹å®æ™¯åœ°å›¾</p>

<p>import gpxpy as gpx
import gpxpy.gpx</p>

<p>gpx = gpxpy.gpx.GPX()</p>

<p>for index, row in train_df.iterrows():
    #print (row[â€˜latitudeâ€™], row[â€˜longitudeâ€™])</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if row['interest_level'] == 'high': #opting for all nominals results in poor performance of Google Earth
    gps_waypoint = gpxpy.gpx.GPXWaypoint(row['latitude'],row['longitude'],elevation=10)
    gpx.waypoints.append(gps_waypoint)
</code></pre></div></div>

<p>filename = â€œGoogleEarth.gpxâ€
FILE = open(filename,â€wâ€)
FILE.writelines(gpx.to_xml())
FILE.close()</p>

<h5 id="display_address">Display_address</h5>

<p>ç»Ÿè®¡ä¸€ä¸‹å„ä¸ªåœ°ç†ä½ç½®å‡ºç°çš„æ¬¡æ•°</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">count</span> <span class="o">=</span> <span class="n">train_df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'display_address'</span><span class="p">)[</span><span class="s">'display_address'</span><span class="p">]</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">count</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">log</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="c1">#sns.distplot(cnt_srs.values, bins=100)
</span></code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(array([7.496e+03, 4.120e+02, 2.470e+02, 1.330e+02, 8.800e+01, 8.000e+01,
        4.100e+01, 3.800e+01, 4.000e+01, 2.400e+01, 2.700e+01, 1.400e+01,
        1.400e+01, 1.900e+01, 1.500e+01, 1.600e+01, 1.200e+01, 1.100e+01,
        1.000e+01, 5.000e+00, 1.000e+01, 5.000e+00, 4.000e+00, 6.000e+00,
        6.000e+00, 3.000e+00, 4.000e+00, 2.000e+00, 0.000e+00, 1.000e+00,
        3.000e+00, 3.000e+00, 5.000e+00, 2.000e+00, 1.000e+00, 1.000e+00,
        0.000e+00, 4.000e+00, 1.000e+00, 1.000e+00, 4.000e+00, 1.000e+00,
        0.000e+00, 3.000e+00, 1.000e+00, 1.000e+00, 0.000e+00, 0.000e+00,
        2.000e+00, 0.000e+00, 0.000e+00, 1.000e+00, 0.000e+00, 0.000e+00,
        2.000e+00, 1.000e+00, 0.000e+00, 0.000e+00, 1.000e+00, 0.000e+00,
        0.000e+00, 0.000e+00, 0.000e+00, 0.000e+00, 0.000e+00, 1.000e+00,
        0.000e+00, 0.000e+00, 0.000e+00, 0.000e+00, 0.000e+00, 0.000e+00,
        0.000e+00, 0.000e+00, 0.000e+00, 1.000e+00, 0.000e+00, 0.000e+00,
        0.000e+00, 1.000e+00, 0.000e+00, 1.000e+00, 0.000e+00, 0.000e+00,
        0.000e+00, 0.000e+00, 0.000e+00, 0.000e+00, 0.000e+00, 0.000e+00,
        0.000e+00, 0.000e+00, 0.000e+00, 0.000e+00, 0.000e+00, 0.000e+00,
        0.000e+00, 0.000e+00, 0.000e+00, 1.000e+00]),
 array([  1.  ,   5.37,   9.74,  14.11,  18.48,  22.85,  27.22,  31.59,
         35.96,  40.33,  44.7 ,  49.07,  53.44,  57.81,  62.18,  66.55,
         70.92,  75.29,  79.66,  84.03,  88.4 ,  92.77,  97.14, 101.51,
        105.88, 110.25, 114.62, 118.99, 123.36, 127.73, 132.1 , 136.47,
        140.84, 145.21, 149.58, 153.95, 158.32, 162.69, 167.06, 171.43,
        175.8 , 180.17, 184.54, 188.91, 193.28, 197.65, 202.02, 206.39,
        210.76, 215.13, 219.5 , 223.87, 228.24, 232.61, 236.98, 241.35,
        245.72, 250.09, 254.46, 258.83, 263.2 , 267.57, 271.94, 276.31,
        280.68, 285.05, 289.42, 293.79, 298.16, 302.53, 306.9 , 311.27,
        315.64, 320.01, 324.38, 328.75, 333.12, 337.49, 341.86, 346.23,
        350.6 , 354.97, 359.34, 363.71, 368.08, 372.45, 376.82, 381.19,
        385.56, 389.93, 394.3 , 398.67, 403.04, 407.41, 411.78, 416.15,
        420.52, 424.89, 429.26, 433.63, 438.  ]),
 &lt;a list of 100 Patch objects&gt;)
</code></pre></div></div>

<p><img src="/media/editor/output_63_1_20190324215005730249.png" alt="" /></p>

<p>è§‚å¯Ÿåœ°ç†ä½ç½®å‡ºç°æ¬¡æ•°ä¸å®¢æˆ·åå¥½çš„å…³ç³»</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">counter</span> <span class="o">=</span>  <span class="k">lambda</span> <span class="n">address</span><span class="p">:</span> <span class="n">count</span><span class="p">[</span><span class="n">address</span><span class="p">]</span>
<span class="n">tmp</span> <span class="o">=</span> <span class="n">train_df</span><span class="p">[[</span><span class="s">'display_address'</span><span class="p">,</span> <span class="s">'interest_level'</span><span class="p">]]</span>
<span class="n">tmp</span><span class="p">[</span><span class="s">'display_address'</span><span class="p">]</span> <span class="o">=</span> <span class="n">tmp</span><span class="p">[</span><span class="s">'display_address'</span><span class="p">]</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="n">counter</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>D:\Anaconda3\lib\site-packages\ipykernel_launcher.py:3: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame.
Try using .loc[row_indexer,col_indexer] = value instead

See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy
  This is separate from the ipykernel package so we can avoid doing imports until
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="s">'low'</span><span class="p">,</span> <span class="s">'medium'</span><span class="p">,</span> <span class="s">'high'</span><span class="p">]</span>
<span class="c1">#sns.stripplot(tmp['interest_level'], tmp['display_address'], jitter=True, order = order)
</span><span class="n">sns</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="s">'interest_level'</span><span class="p">,</span> <span class="s">'display_address'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">tmp</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c99057d828&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_66_1_20190324214430934020.png" alt="" /></p>

<h5 id="ç…§ç‰‡æ•°é‡">ç…§ç‰‡æ•°é‡</h5>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">train_df</span><span class="p">[</span><span class="s">'num_photos'</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_df</span><span class="p">[</span><span class="s">'photos'</span><span class="p">]</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="nb">len</span><span class="p">)</span>
<span class="n">split</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'num_photos'</span><span class="p">],</span> <span class="p">(</span><span class="mi">99</span><span class="p">))</span>
<span class="n">train_df</span><span class="p">[</span><span class="s">'num_photos'</span><span class="p">][</span><span class="n">train_df</span><span class="p">[</span><span class="s">'num_photos'</span><span class="p">]</span><span class="o">&gt;</span><span class="n">split</span><span class="p">]</span> <span class="o">=</span> <span class="n">split</span>

<span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'num_photos'</span><span class="p">])</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>D:\Anaconda3\lib\site-packages\ipykernel_launcher.py:3: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: http://pandas.pydata.org/pandas-docs/stable/indexing.html#indexing-view-versus-copy
  This is separate from the ipykernel package so we can avoid doing imports until





&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c99103ccf8&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_68_2_20190324214514308895.png" alt="" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="s">'low'</span><span class="p">,</span> <span class="s">'medium'</span><span class="p">,</span> <span class="s">'high'</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="s">'num_photos'</span><span class="p">,</span> <span class="s">'interest_level'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">train_df</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c99057ed68&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_69_1_20190324214548897829.png" alt="" /></p>

<h5 id="ç‰¹ç‚¹features">ç‰¹ç‚¹ï¼ˆfeaturesï¼‰</h5>

<p>ç»Ÿè®¡æˆ¿å±‹åˆ—å‡ºçš„ç‰¹ç‚¹çš„æ¡æ•°ä¸å®¢æˆ·å…´è¶£ä¹‹é—´çš„å…³ç³»</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">train_df</span><span class="p">[</span><span class="s">'len_features'</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_df</span><span class="p">[</span><span class="s">'features'</span><span class="p">]</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="nb">len</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'len_features'</span><span class="p">])</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c990add518&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_72_1_20190324214622422846.png" alt="" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="s">'low'</span><span class="p">,</span> <span class="s">'medium'</span><span class="p">,</span> <span class="s">'high'</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="s">'len_features'</span><span class="p">,</span> <span class="s">'interest_level'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">train_df</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c990c76c18&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_73_1_20190324214650475354.png" alt="" /></p>

<h5 id="æè¿°">æè¿°</h5>

<p>é¦–å…ˆç»Ÿè®¡æè¿°é•¿åº¦ï¼Œå¹¶è§‚å¯Ÿå®ƒä¸å®¢æˆ·å…´è¶£ä¹‹é—´çš„å…³ç³»</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">train_df</span><span class="p">[</span><span class="s">'len_description'</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_df</span><span class="p">[</span><span class="s">'description'</span><span class="p">]</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="nb">len</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="s">'low'</span><span class="p">,</span> <span class="s">'medium'</span><span class="p">,</span> <span class="s">'high'</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">stripplot</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'interest_level'</span><span class="p">],</span> <span class="n">train_df</span><span class="p">[</span><span class="s">'len_description'</span><span class="p">],</span> <span class="n">jitter</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c99103f198&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_77_1_20190324214705403563.png" alt="" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="s">'low'</span><span class="p">,</span> <span class="s">'medium'</span><span class="p">,</span> <span class="s">'high'</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="s">'len_description'</span><span class="p">,</span> <span class="s">'interest_level'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">train_df</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c990abf208&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_78_1_20190324214718985928.png" alt="" /></p>

<p>ç„¶åç»Ÿè®¡æè¿°å•è¯æ•°ä¸å®¢æˆ·å…´è¶£ä¹‹é—´çš„å…³ç³»</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">count</span> <span class="o">=</span>  <span class="k">lambda</span> <span class="n">description</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">description</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
<span class="n">train_df</span><span class="p">[</span><span class="s">'num_description_words'</span><span class="p">]</span> <span class="o">=</span> <span class="n">train_df</span><span class="p">[</span><span class="s">'description'</span><span class="p">]</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="n">count</span><span class="p">)</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="s">'low'</span><span class="p">,</span> <span class="s">'medium'</span><span class="p">,</span> <span class="s">'high'</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">stripplot</span><span class="p">(</span><span class="n">train_df</span><span class="p">[</span><span class="s">'interest_level'</span><span class="p">],</span> <span class="n">train_df</span><span class="p">[</span><span class="s">'num_description_words'</span><span class="p">],</span> <span class="n">jitter</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c990b46c88&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_81_1_20190324214736268655.png" alt="" /></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="s">'low'</span><span class="p">,</span> <span class="s">'medium'</span><span class="p">,</span> <span class="s">'high'</span><span class="p">]</span>
<span class="n">sns</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="s">'num_description_words'</span><span class="p">,</span> <span class="s">'interest_level'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">train_df</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x1c990b50898&gt;
</code></pre></div></div>

<p><img src="/media/editor/output_82_1_20190324214751401692.png" alt="" /></p>

<p>æŸ¥çœ‹å‡ºç°æ¬¡æ•°å‰15çš„ç”¨è¯</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">words</span> <span class="o">=</span> <span class="n">train_df</span><span class="p">[</span><span class="s">'description'</span><span class="p">]</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">l</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">word_list</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
    <span class="n">l</span> <span class="o">+=</span> <span class="n">word_list</span>
<span class="n">word_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">word_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">word</span><span class="p">):</span>
        <span class="n">word_dict</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">word_dict</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div></div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sorted</span><span class="p">(</span><span class="n">word_dict</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])[</span><span class="o">-</span><span class="mi">20</span><span class="p">:]</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[('kitchen', 15995),
 ('from', 16065),
 ('building', 16269),
 ('/&gt;&lt;p&gt;&lt;a', 16589),
 ('The', 17098),
 ('this', 18843),
 ('on', 19408),
 ('or', 22454),
 ('apartment', 24377),
 ('for', 26662),
 ('website_redacted', 35409),
 ('is', 42832),
 ('of', 53380),
 ('in', 57049),
 ('with', 59600),
 ('to', 63061),
 ('a', 83595),
 ('the', 85583),
 ('/&gt;&lt;br', 115420),
 ('and', 135368)]
</code></pre></div></div>
:ET