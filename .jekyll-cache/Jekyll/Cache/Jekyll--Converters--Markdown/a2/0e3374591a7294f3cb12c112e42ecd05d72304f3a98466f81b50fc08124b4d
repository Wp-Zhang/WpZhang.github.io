I"™0<hr />
<h4 id="å†™åœ¨å‰é¢">å†™åœ¨å‰é¢</h4>
<p>ä¹‹å‰å†™è¿‡ä¸€ä¸ªçˆ¬å–äº¬ä¸œå•†å“çš„Scrapyçˆ¬è™«é¡¹ç›®ï¼Œä½†æ˜¯é‡Œé¢ä»·æ ¼åŠè¯„è®ºæ•°æ˜¯é€šè¿‡é€†å‘å·¥ç¨‹æ³•è·å¾—çš„ï¼Œåœ¨ä¸ä½¿ç”¨ä»£ç†ipçš„æƒ…å†µä¸‹ï¼Œåœ¨çˆ¬å–ä¸€å®šæ•°é‡çš„å•†å“åä¼šè¢«æŒç»­è¦æ±‚è¾“å…¥éªŒè¯ç ã€‚æ‰€ä»¥è¿™é‡Œå†™å‡ºåˆ©ç”¨åŠ¨æ€é¡µé¢æ¸²æŸ“å¯¹äº¬ä¸œå•†å“ä»·æ ¼åŠè¯„è®ºæ•°çˆ¬å–çš„æ–¹æ³•ã€‚
åœ¨ä¹‹å‰çš„é¡¹ç›®ä¸­ï¼Œæ„é€ ç‰¹æ®Šè¯·æ±‚è·å¾—çš„æ•°æ®æœ‰ï¼š</p>

<ol>
  <li>ä»·æ ¼</li>
  <li>è¯„è®ºæ•°</li>
  <li>å¥½è¯„åº¦</li>
</ol>

<p>ä½†ç”±äºå¥½è¯„åº¦éœ€è¦è¿›å…¥å•ä¸ªå•†å“çš„é¡µé¢æ‰èƒ½è·å–ï¼Œè€Œåˆ©ç”¨åŠ¨æ€æ¸²æŸ“é¡µé¢çˆ¬å–æ•°æ®å…¶å®æ˜¯æ¨¡æ‹ŸçœŸå®æµè§ˆå™¨å¯¹ç½‘é¡µè®¿é—®ï¼ŒåŠ è½½æ‰€æœ‰ç½‘é¡µå†…å®¹åå®ç°â€œå¯è§å³å¯å¾—â€ï¼Œæ‰€ä»¥é€Ÿåº¦æ¯”requests.get()ç­‰è¦æ…¢å¾ˆå¤šå¾ˆå¤šï¼Œåœ¨è¦æ‰¹é‡çˆ¬å–å¤§é‡å•†å“ä¿¡æ¯æ—¶æ•ˆç‡æä½ã€‚æ‰€ä»¥è¿™é‡Œå°±èˆå¼ƒäº†å¥½è¯„åº¦è¿™é¡¹æ•°æ®ï¼Œä¿ç•™äº† ä»·æ ¼ å’Œ è¯„è®ºæ•° è¿™ä¸¤é¡¹åœ¨å•†å“æµè§ˆé¡µé¢å°±å¯ä»¥è·å–çš„æ•°æ®ã€‚</p>

<hr />
<h4 id="åˆ©ç”¨seleniumå¯¹ä»·æ ¼è¯„è®ºæ•°æå–">åˆ©ç”¨Seleniumå¯¹ä»·æ ¼ã€è¯„è®ºæ•°æå–</h4>

<h6 id="æ³¨è¿™é‡Œä½¿ç”¨è°·æ­Œæµè§ˆå™¨">æ³¨ï¼šè¿™é‡Œä½¿ç”¨è°·æ­Œæµè§ˆå™¨</h6>
<p>é¦–å…ˆåˆ©ç”¨Seleniumæ‰“å¼€Chromeå¹¶è®¿é—®å•†å“é¡µé¢(ç”±äºè¦æ‰¹é‡çˆ¬å–å•†å“ä¿¡æ¯ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨headlessæ¨¡å¼éšè—æµè§ˆå™¨ç•Œé¢)ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>

<span class="n">chrome_options</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">ChromeOptions</span><span class="p">()</span>
<span class="n">chrome_options</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">'--headless'</span><span class="p">)</span>
<span class="n">browser</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">Chrome</span><span class="p">(</span><span class="n">chrome_options</span><span class="o">=</span><span class="n">chrome_options</span><span class="p">)</span>

<span class="n">page</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">"https://list.jd.com/list.html?cat=670,671,672&amp;page="</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">page</span><span class="p">)</span> <span class="o">+</span> <span class="s">"&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=6_0_0#J_main"</span>
<span class="n">browser</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="n">html</span> <span class="o">=</span> <span class="n">browser</span><span class="p">.</span><span class="n">page_source</span>
</code></pre></div></div>
<p>è¿™æ ·å°±è·å–äº†é¡µé¢æ‰€æœ‰ä¿¡æ¯ï¼Œç„¶ååœ¨Chromçš„å¼€å‘è€…å·¥å…·ä¸­å¯¹é¡µé¢è¿›è¡Œåˆ†æï¼š</p>

<p><img src="/media/editor/20180824105255397_20190219135600271526.png" alt="" /></p>

<p>å¯è§æ¯ä¸€ä¸ª<code class="language-plaintext highlighter-rouge">&lt;li class="gl-item"&gt;...&lt;/li&gt;</code>ä¸­éƒ½åŒ…å«äº†ä¸€ä¸ªå•†å“çš„ä¿¡æ¯ï¼Œç‚¹å¼€æ‰¾åˆ°ä»·æ ¼å’Œè¯„è®ºæ•°æ‰€å¤„çš„ä½ç½®ï¼š</p>

<p><img src="/media/editor/20180824105727976_20190219135619991759.png" alt="" /></p>

<p><img src="/media/editor/20180824105839332_20190219135638469842.png" alt="" /></p>

<p>ç„¶ååˆ©ç”¨pyqueryåº“å¯¹ä»·æ ¼å’Œè¯„è®ºæ•°è¿›è¡Œæå–ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</code></pre></div></div>
<p>é¦–å…ˆæå–æ‰€æœ‰çš„<code class="language-plaintext highlighter-rouge">&lt;li class="gl-item"&gt;...&lt;/li&gt;</code>:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">info</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.gl-item'</span><span class="p">).</span><span class="n">items</span><span class="p">()</span>
</code></pre></div></div>
<p>ç„¶åéå†å¹¶æå–ä»·æ ¼å’Œè¯„è®ºæ•°ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">info</span><span class="p">:</span>
	<span class="n">price</span> <span class="o">=</span> <span class="n">item</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'.J_price.js_ys'</span><span class="p">).</span><span class="n">text</span><span class="p">()</span>
	<span class="n">comment</span> <span class="o">=</span> <span class="n">item</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'.p-commit'</span><span class="p">).</span><span class="n">text</span><span class="p">()</span>
</code></pre></div></div>
<p>å¤šè§‚å¯Ÿå‡ ä¸ªå•†å“åä¼šå‘ç°æœ‰çš„å•†å“è¯„è®ºæ•°åæœ‰â€œäºŒæ‰‹æœ‰å”®â€ï¼Œè€Œæœ‰çš„æ²¡æœ‰</p>

<p><img src="/media/editor/20180824110407416_20190219135704688592.png" alt="" /></p>

<p>è€Œâ€œäºŒæ‰‹æœ‰å”®â€å°†ä¼šå‡ºç°åœ¨æå–çš„commentä¸­ï¼Œæ‰€ä»¥è¿›è¡Œå¤„ç†ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">re</span>
<span class="n">comment</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">r'å·²æœ‰\n(.*?)\näººè¯„ä»·'</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">comment</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></div>
<p>è¿™æ ·æå–å‡ºæ¥çš„è¯„è®ºä¸ºâ€œ2.3ä¸‡+â€è¿™æ ·çš„æ ¼å¼ï¼Œä¸ºäº†åæœŸåœ¨æ•°æ®åº“ä¸­å¯¹æ•°æ®çš„æ¯”è¾ƒæ“ä½œï¼Œè¿™é‡Œå†è¿›è¡Œå¤„ç†ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="s">'ä¸‡'</span> <span class="ow">in</span> <span class="n">comment</span><span class="p">:</span>
	<span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'ä¸‡+'</span><span class="p">,</span> <span class="s">''</span><span class="p">)</span>
	<span class="n">comment</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10000</span><span class="p">)</span>
<span class="k">elif</span> <span class="s">'+'</span> <span class="ow">in</span> <span class="n">comment</span><span class="p">:</span>
	<span class="n">comment</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">comment</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'+'</span><span class="p">,</span> <span class="s">''</span><span class="p">))</span>
</code></pre></div></div>
<p>åŒæ ·çš„ï¼Œå¯¹ä»·æ ¼è¿›è¡Œå¤„ç†ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">price</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">price</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'Â¥</span><span class="se">\n</span><span class="s">'</span><span class="p">,</span> <span class="s">''</span><span class="p">))</span>
</code></pre></div></div>
<p>æœ€åå°†ä¸¤ä¸ªæ•°æ®åˆ†åˆ«å­˜å‚¨åˆ°å¯¹åº”çš„åˆ—è¡¨ä¸­ï¼š</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">prices</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">comments</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">prices</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">price</span><span class="p">)</span>
<span class="n">comments</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
</code></pre></div></div>

<h6 id="è¿™æ ·å•†å“çš„ä»·æ ¼å’Œè¯„è®ºæ•°å°±æå–å®Œæˆäº†">è¿™æ ·å•†å“çš„ä»·æ ¼å’Œè¯„è®ºæ•°å°±æå–å®Œæˆäº†ã€‚</h6>

<hr />
<p>åæœŸæ“ä½œå’Œä¹‹å‰å†™çš„é¡¹ç›® <a href="https://blog.csdn.net/ZZPHOENIX/article/details/81569501">Scrapyæ¡†æ¶çˆ¬è™«é¡¹ç›®ï¼šäº¬ä¸œå•†åŸç¬”è®°æœ¬ç”µè„‘ä¿¡æ¯çˆ¬å–</a> åŸºæœ¬ç›¸åŒ</p>

<p>è¿è¡Œå›¾ç‰‡ï¼š</p>

<p><img src="/media/editor/20180825195749343_20190219135728831086.png" alt="" /></p>

<p>ä»£ç å¦‚ä¸‹ï¼š</p>

<p><strong>æ›´æ–°ï¼š</strong>
<strong>1. å¢åŠ åŠŸèƒ½ï¼šå•†å“çˆ¬å–å¤±è´¥åå•ç‹¬å­˜å‚¨å•†å“é“¾æ¥å¹¶åœ¨åæœŸé‡æ–°çˆ¬å–</strong>
<strong>2. è§£å†³äº†â€œå…¨çƒè´­â€å•†å“çš„ä¿¡æ¯å­˜å‚¨æ ¼å¼ä¸æ™®é€šå•†å“ä¸åŒå¯¼è‡´çˆ¬å–å¤±è´¥çš„é—®é¢˜</strong></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
<span class="kn">from</span> <span class="nn">pyquery</span> <span class="kn">import</span> <span class="n">PyQuery</span> <span class="k">as</span> <span class="n">pq</span>
<span class="kn">import</span> <span class="nn">pymysql</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">urllib.request</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">threading</span>

<span class="n">connection</span> <span class="o">=</span> <span class="n">pymysql</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="s">'root'</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s">'Zwp0816...'</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s">'127.0.0.1'</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="s">'JD_Goods'</span><span class="p">)</span>
<span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="p">.</span><span class="n">cursor</span><span class="p">()</span>
<span class="n">cursor</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="s">'drop table if exists new_Goods;'</span><span class="p">)</span>
<span class="n">cursor</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="s">'create table new_Goods(åç§° varchar(100), ä»·æ ¼ float, è¯„è®º int, å†…å­˜ varchar(100), CPUç±»å‹ varchar(100), CPUå‹å· varchar(100), CPUé€Ÿåº¦ varchar(100), CPUæ ¸å¿ƒ varchar(100), ç¡¬ç›˜å®¹é‡ varchar(100), å›ºæ€ç¡¬ç›˜ varchar(100), æ˜¾å¡ç±»å‹ varchar(100), æ˜¾ç¤ºèŠ¯ç‰‡ varchar(100), æ˜¾å­˜å®¹é‡ varchar(100), å°ºå¯¸ varchar(100), é‡é‡ varchar(100), é“¾æ¥ varchar(100));'</span><span class="p">)</span>
<span class="c1"># cursor.execute('create table Goods(åç§° varchar(100), ä»·æ ¼ varchar(100), å¥½è¯„æ•° int, å·®è¯„æ•° int, å¥½è¯„åº¦ varchar(10), å†…å­˜ varchar(100), CPUç±»å‹ varchar(100), CPUå‹å· varchar(100), CPUé€Ÿåº¦ varchar(100), CPUæ ¸å¿ƒ varchar(100), ç¡¬ç›˜å®¹é‡ varchar(100), å›ºæ€ç¡¬ç›˜ varchar(100), æ˜¾å¡ç±»å‹ varchar(100), æ˜¾ç¤ºèŠ¯ç‰‡ varchar(100), æ˜¾å­˜å®¹é‡ varchar(100), å°ºå¯¸ varchar(100), é‡é‡ varchar(100), é“¾æ¥ varchar(100));')
</span><span class="n">connection</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span>

<span class="n">chrome_options</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">ChromeOptions</span><span class="p">()</span>
<span class="n">chrome_options</span><span class="p">.</span><span class="n">add_argument</span><span class="p">(</span><span class="s">'--headless'</span><span class="p">)</span>
<span class="c1"># browser2 = webdriver.Chrome(chrome_options=chrome_options)
</span><span class="s">'''
browser = webdriver.Firefox()
'''</span>
<span class="c1"># TOTALä¸ºæ€»é¡µæ•°
</span><span class="n">url</span> <span class="o">=</span> <span class="s">'https://list.jd.com/list.html?cat=670,671,672&amp;page=1'</span>
<span class="n">TOTAL</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="p">.</span><span class="n">findall</span><span class="p">(</span><span class="s">'&lt;em&gt;å…±&lt;b&gt;(.*?)&lt;/b&gt;'</span><span class="p">,</span> <span class="n">urllib</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">).</span><span class="n">read</span><span class="p">().</span><span class="n">decode</span><span class="p">(</span><span class="s">'utf-8'</span><span class="p">,</span> <span class="s">'ignore'</span><span class="p">))[</span><span class="mi">0</span><span class="p">])</span>
<span class="c1"># print(TOTAL)
#TOTAL = 1
</span>
<span class="k">global</span> <span class="n">count</span><span class="p">,</span> <span class="n">links</span><span class="p">,</span> <span class="n">prices</span><span class="p">,</span> <span class="n">comments</span><span class="p">,</span> <span class="n">retry_index</span><span class="p">,</span> <span class="n">retry_products</span><span class="p">,</span> <span class="n">fail_links</span>
<span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">links</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">prices</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">comments</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">retry_index</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">retry_products</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">fail_links</span> <span class="o">=</span> <span class="p">[]</span>


<span class="k">def</span> <span class="nf">get_url_price_and_comment</span><span class="p">(</span><span class="n">index</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s">"https://list.jd.com/list.html?cat=670,671,672&amp;page="</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
            <span class="n">index</span><span class="p">)</span> <span class="o">+</span> <span class="s">"&amp;sort=sort_totalsales15_desc&amp;trans=1&amp;JL=6_0_0#J_main"</span>
        <span class="n">page</span> <span class="o">=</span> <span class="n">urllib</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">).</span><span class="n">read</span><span class="p">().</span><span class="n">decode</span><span class="p">(</span><span class="s">'gbk'</span><span class="p">,</span> <span class="s">'ignore'</span><span class="p">)</span>

        <span class="k">global</span> <span class="n">links</span><span class="p">,</span> <span class="n">prices</span><span class="p">,</span> <span class="n">comments</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;a target="_blank" title="" href="(.*?)"&gt;'</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)):</span>
            <span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s">'https:'</span> <span class="o">+</span> <span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">links</span> <span class="o">+=</span> <span class="n">results</span>

        <span class="n">browser</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">Chrome</span><span class="p">(</span><span class="n">chrome_options</span><span class="o">=</span><span class="n">chrome_options</span><span class="p">)</span>
        <span class="n">browser</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">browser</span><span class="p">.</span><span class="n">page_source</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">browser</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">doc</span><span class="p">(</span><span class="s">'.gl-item'</span><span class="p">).</span><span class="n">items</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">info</span><span class="p">:</span>
            <span class="n">price</span> <span class="o">=</span> <span class="n">item</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'.J_price.js_ys'</span><span class="p">).</span><span class="n">text</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">price</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">price</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'Â¥</span><span class="se">\n</span><span class="s">'</span><span class="p">,</span> <span class="s">''</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">price</span> <span class="o">=</span> <span class="s">"NULL"</span>
            <span class="n">prices</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">price</span><span class="p">)</span>

            <span class="n">comment</span> <span class="o">=</span> <span class="n">item</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'.p-commit'</span><span class="p">).</span><span class="n">text</span><span class="p">()</span>
            <span class="n">comment</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">r'å·²æœ‰\n(.*?)\näººè¯„ä»·'</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">comment</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="s">'ä¸‡'</span> <span class="ow">in</span> <span class="n">comment</span><span class="p">:</span>
                <span class="n">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'ä¸‡+'</span><span class="p">,</span> <span class="s">''</span><span class="p">)</span>
                <span class="n">comment</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span> <span class="o">*</span> <span class="mi">10000</span><span class="p">)</span>
            <span class="k">elif</span> <span class="s">'+'</span> <span class="ow">in</span> <span class="n">comment</span><span class="p">:</span>
                <span class="n">comment</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">comment</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'+'</span><span class="p">,</span> <span class="s">''</span><span class="p">))</span>
            <span class="n">comments</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">======================ç¬¬"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">+</span> <span class="s">"é¡µ======================</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span>

    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
        <span class="k">global</span> <span class="n">retry_index</span>
        <span class="n">retry_index</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_product</span><span class="p">(</span><span class="n">page</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">links</span><span class="p">,</span> <span class="n">prices</span><span class="p">,</span> <span class="n">comments</span>
    <span class="n">link</span> <span class="o">=</span> <span class="n">links</span><span class="p">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">price</span> <span class="o">=</span> <span class="n">prices</span><span class="p">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">comment</span> <span class="o">=</span> <span class="n">comments</span><span class="p">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">urllib</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">5</span><span class="p">).</span><span class="n">read</span><span class="p">().</span><span class="n">decode</span><span class="p">(</span><span class="s">'gbk'</span><span class="p">,</span> <span class="s">'ignore'</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;img id="spec-img".*?alt="(.*?)"'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="n">result1</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;å†…å­˜å®¹é‡&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">result2</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;å†…å­˜ç±»å‹&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">result1</span> <span class="o">=</span> <span class="n">result1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result1</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>
        <span class="n">result2</span> <span class="o">=</span> <span class="n">result2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result2</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>
        <span class="n">internalStorage</span> <span class="o">=</span> <span class="n">result1</span> <span class="o">+</span> <span class="n">result2</span>
        <span class="c1"># print(internalStorage)
</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;CPUç±»å‹&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">cpu_type</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>
        <span class="c1"># print(cpu_type)
</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;CPUå‹å·&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">cpu_Mode</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>
        <span class="c1"># print(cpu_Mode)
</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;CPUé€Ÿåº¦&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">cpu_speed</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;æ ¸å¿ƒ&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">cpu_core</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;ç¡¬ç›˜å®¹é‡&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">diskCapacity</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;å›ºæ€ç¡¬ç›˜&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">SSD</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;ç±»å‹&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">GCtype</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;æ˜¾ç¤ºèŠ¯ç‰‡&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">GCcore</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;æ˜¾å­˜å®¹é‡&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">GCcapacity</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;å°ºå¯¸&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;å‡€é‡&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">weight</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="k">if</span> <span class="n">price</span> <span class="o">!=</span> <span class="s">'NULL'</span><span class="p">:</span>

            <span class="n">sql</span> <span class="o">=</span> <span class="s">'insert into new_Goods values(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'</span>
            <span class="n">cursor</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="p">(</span>
                <span class="n">name</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">comment</span><span class="p">,</span> <span class="n">internalStorage</span><span class="p">,</span> <span class="n">cpu_type</span><span class="p">,</span> <span class="n">cpu_Mode</span><span class="p">,</span> <span class="n">cpu_speed</span><span class="p">,</span> <span class="n">cpu_core</span><span class="p">,</span> <span class="n">diskCapacity</span><span class="p">,</span> <span class="n">SSD</span><span class="p">,</span>
                <span class="n">GCtype</span><span class="p">,</span>
                <span class="n">GCcore</span><span class="p">,</span> <span class="n">GCcapacity</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">link</span><span class="p">))</span>
            <span class="n">connection</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="k">global</span> <span class="n">count</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"ç¬¬"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">page</span><span class="p">)</span> <span class="o">+</span> <span class="s">"é¡µ</span><span class="se">\t\t</span><span class="s">æ€»ç¬¬"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">+</span> <span class="s">"ä¸ªå•†å“å¤„ç†å®Œæˆ</span><span class="se">\t\t</span><span class="s">å®Œæˆåº¦ï¼š"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
                <span class="nb">int</span><span class="p">((</span><span class="n">count</span> <span class="o">/</span> <span class="p">(</span><span class="n">TOTAL</span> <span class="o">*</span> <span class="mi">60</span><span class="p">))</span> <span class="o">*</span> <span class="mi">1000000</span><span class="p">)</span> <span class="o">/</span> <span class="mi">10000</span><span class="p">)</span> <span class="o">+</span> <span class="s">"%"</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">global</span> <span class="n">retry_products</span>
            <span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="s">'link'</span><span class="p">:</span> <span class="n">link</span><span class="p">,</span> <span class="s">'comment'</span><span class="p">:</span> <span class="n">comment</span><span class="p">}</span>
            <span class="n">retry_products</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
            <span class="k">print</span><span class="p">(</span><span class="s">'! ! ! ! ! !é”™è¯¯: ä»·æ ¼ä¸ºç©º</span><span class="se">\t</span><span class="s">ç¨åé‡è¯•'</span><span class="p">)</span>

    <span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'! ! ! ! ! !é”™è¯¯: '</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="s">'</span><span class="se">\t</span><span class="s">ç¨åé‡è¯•'</span><span class="p">)</span>
        <span class="n">info</span> <span class="o">=</span> <span class="p">{</span><span class="s">'link'</span><span class="p">:</span> <span class="n">link</span><span class="p">,</span> <span class="s">'comment'</span><span class="p">:</span> <span class="n">comment</span><span class="p">}</span>
        <span class="n">retry_products</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">retry_product</span><span class="p">(</span><span class="n">page</span><span class="p">):</span>
    <span class="k">global</span> <span class="n">retry_products</span>
    <span class="n">info</span> <span class="o">=</span> <span class="n">retry_products</span><span class="p">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">link</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s">'link'</span><span class="p">]</span>
    <span class="n">comment</span> <span class="o">=</span> <span class="n">info</span><span class="p">[</span><span class="s">'comment'</span><span class="p">]</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">browser</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">Chrome</span><span class="p">(</span><span class="n">chrome_options</span><span class="o">=</span><span class="n">chrome_options</span><span class="p">)</span>
        <span class="n">browser</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
        <span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">browser</span><span class="p">.</span><span class="n">page_source</span><span class="p">)</span>
        <span class="n">price</span> <span class="o">=</span> <span class="n">doc</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'.summary-price .price'</span><span class="p">).</span><span class="n">text</span><span class="p">()</span>
        <span class="n">price</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">price</span><span class="p">)</span>

        <span class="n">html</span> <span class="o">=</span> <span class="n">urllib</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">).</span><span class="n">read</span><span class="p">().</span><span class="n">decode</span><span class="p">(</span><span class="s">'gbk'</span><span class="p">,</span> <span class="s">'ignore'</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;img id="spec-img".*?alt="(.*?)"'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="n">result1</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;å†…å­˜å®¹é‡&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">result2</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;å†…å­˜ç±»å‹&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">result1</span> <span class="o">=</span> <span class="n">result1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result1</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>
        <span class="n">result2</span> <span class="o">=</span> <span class="n">result2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result2</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>
        <span class="n">internalStorage</span> <span class="o">=</span> <span class="n">result1</span> <span class="o">+</span> <span class="n">result2</span>
        <span class="c1"># print(internalStorage)
</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;CPUç±»å‹&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">cpu_type</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>
        <span class="c1"># print(cpu_type)
</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;CPUå‹å·&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">cpu_Mode</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>
        <span class="c1"># print(cpu_Mode)
</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;CPUé€Ÿåº¦&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">cpu_speed</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;æ ¸å¿ƒ&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">cpu_core</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;ç¡¬ç›˜å®¹é‡&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">diskCapacity</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;å›ºæ€ç¡¬ç›˜&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">SSD</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;ç±»å‹&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">GCtype</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;æ˜¾ç¤ºèŠ¯ç‰‡&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">GCcore</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;æ˜¾å­˜å®¹é‡&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">GCcapacity</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;å°ºå¯¸&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">size</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;dt&gt;å‡€é‡&lt;/dt&gt;.*?&lt;dd&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">weight</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

        <span class="n">sql</span> <span class="o">=</span> <span class="s">'insert into new_Goods values(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'</span>
        <span class="n">cursor</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="p">(</span>
            <span class="n">name</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">comment</span><span class="p">,</span> <span class="n">internalStorage</span><span class="p">,</span> <span class="n">cpu_type</span><span class="p">,</span> <span class="n">cpu_Mode</span><span class="p">,</span> <span class="n">cpu_speed</span><span class="p">,</span> <span class="n">cpu_core</span><span class="p">,</span> <span class="n">diskCapacity</span><span class="p">,</span> <span class="n">SSD</span><span class="p">,</span>
            <span class="n">GCtype</span><span class="p">,</span>
            <span class="n">GCcore</span><span class="p">,</span> <span class="n">GCcapacity</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">link</span><span class="p">))</span>

        <span class="n">connection</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">global</span> <span class="n">count</span>
        <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"ç¬¬"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">page</span><span class="p">)</span> <span class="o">+</span> <span class="s">"é¡µ</span><span class="se">\t\t</span><span class="s">æ€»ç¬¬"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">+</span> <span class="s">"ä¸ªå•†å“å¤„ç†å®Œæˆ</span><span class="se">\t\t</span><span class="s">å®Œæˆåº¦ï¼š"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
            <span class="nb">int</span><span class="p">((</span><span class="n">count</span> <span class="o">/</span> <span class="p">(</span><span class="n">TOTAL</span> <span class="o">*</span> <span class="mi">60</span><span class="p">))</span> <span class="o">*</span> <span class="mi">10000</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="o">+</span> <span class="s">"%"</span><span class="p">)</span>

    <span class="k">except</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># å¤„ç†â€œå…¨çƒè´­â€å•†å“
</span>            <span class="n">browser</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">Chrome</span><span class="p">(</span><span class="n">chrome_options</span><span class="o">=</span><span class="n">chrome_options</span><span class="p">)</span>
            <span class="n">browser</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="n">pq</span><span class="p">(</span><span class="n">browser</span><span class="p">.</span><span class="n">page_source</span><span class="p">)</span>
            <span class="n">price</span> <span class="o">=</span> <span class="n">doc</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'.p-price .price'</span><span class="p">).</span><span class="n">html</span><span class="p">()</span>
            <span class="n">price</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">price</span><span class="p">)</span>

            <span class="n">html</span> <span class="o">=</span> <span class="n">urllib</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="n">timeout</span><span class="o">=</span><span class="bp">None</span><span class="p">).</span><span class="n">read</span><span class="p">().</span><span class="n">decode</span><span class="p">(</span><span class="s">'gbk'</span><span class="p">,</span> <span class="s">'ignore'</span><span class="p">)</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">doc</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="s">'.sku-name'</span><span class="p">).</span><span class="n">text</span><span class="p">()</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">'"'</span><span class="p">,</span> <span class="s">''</span><span class="p">)</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">.</span><span class="n">strip</span><span class="p">()</span>

            <span class="n">result1</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;td class="tdTitle"&gt;æœ€å¤§æ”¯æŒå®¹é‡.*?&lt;td&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="n">result2</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;td class="tdTitle"&gt;å†…å­˜ç±»å‹.*?&lt;td&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="n">result1</span> <span class="o">=</span> <span class="s">"æœ€å¤§æ”¯æŒå®¹é‡"</span> <span class="o">+</span> <span class="n">result1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result1</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>
            <span class="n">result2</span> <span class="o">=</span> <span class="n">result2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result2</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>
            <span class="n">internalStorage</span> <span class="o">=</span> <span class="n">result2</span> <span class="o">+</span> <span class="s">' '</span> <span class="o">+</span> <span class="n">result1</span>
            <span class="c1"># print(internalStorage)
</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;td class="tdTitle"&gt;CPUç±»å‹&lt;/td&gt;.*?&lt;td&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="n">cpu_type</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>
            <span class="c1"># print(cpu_type)
</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;tr&gt;&lt;td class="tdTitle"&gt;CPUå‹å·&lt;/td&gt;.*?&lt;td&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="n">cpu_Mode</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>
            <span class="c1"># print(cpu_Mode)
</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;tr&gt;&lt;td class="tdTitle"&gt;CPUé€Ÿåº¦&lt;/td&gt;.*?&lt;td&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="n">cpu_speed</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

            <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;td class="tdTitle"&gt;æ ¸å¿ƒ&lt;/td&gt;.*?&lt;td&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="n">cpu_core</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

            <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;td class="tdTitle"&gt;ç¡¬ç›˜å®¹é‡&lt;/td&gt;.*?&lt;td&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="n">diskCapacity</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

            <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;td class="tdTitle"&gt;å›ºæ€ç¡¬ç›˜&lt;/td&gt;.*?&lt;td&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="n">SSD</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

            <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;td class="tdTitle"&gt;ç±»å‹&lt;/td&gt;.*?&lt;td&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="n">GCtype</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

            <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;td class="tdTitle"&gt;æ˜¾ç¤ºèŠ¯ç‰‡&lt;/td&gt;.*?&lt;td&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="n">GCcore</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

            <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;td class="tdTitle"&gt;æ˜¾å­˜å®¹é‡&lt;/td&gt;.*?&lt;td&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="n">GCcapacity</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

            <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;td class="tdTitle"&gt;å±å¹•å°ºå¯¸&lt;/td&gt;.*?&lt;td&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="n">size</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

            <span class="n">result</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span><span class="s">'&lt;td class="tdTitle"&gt;å‡€é‡&lt;/td&gt;.*?&lt;td&gt;(.*?)&lt;'</span><span class="p">,</span> <span class="n">re</span><span class="p">.</span><span class="n">S</span><span class="p">).</span><span class="n">findall</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
            <span class="n">weight</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">result</span> <span class="o">!=</span> <span class="p">[]</span> <span class="k">else</span> <span class="s">''</span>

            <span class="n">sql</span> <span class="o">=</span> <span class="s">'insert into new_Goods values(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)'</span>
            <span class="n">cursor</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="p">(</span>
                <span class="n">name</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">comment</span><span class="p">,</span> <span class="n">internalStorage</span><span class="p">,</span> <span class="n">cpu_type</span><span class="p">,</span> <span class="n">cpu_Mode</span><span class="p">,</span> <span class="n">cpu_speed</span><span class="p">,</span> <span class="n">cpu_core</span><span class="p">,</span> <span class="n">diskCapacity</span><span class="p">,</span> <span class="n">SSD</span><span class="p">,</span>
                <span class="n">GCtype</span><span class="p">,</span>
                <span class="n">GCcore</span><span class="p">,</span> <span class="n">GCcapacity</span><span class="p">,</span> <span class="n">size</span><span class="p">,</span> <span class="n">weight</span><span class="p">,</span> <span class="n">link</span><span class="p">))</span>

            <span class="n">connection</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"ç¬¬"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">page</span><span class="p">)</span> <span class="o">+</span> <span class="s">"é¡µ</span><span class="se">\t\t</span><span class="s">æ€»ç¬¬"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">count</span><span class="p">)</span> <span class="o">+</span> <span class="s">"ä¸ªå•†å“å¤„ç†å®Œæˆ</span><span class="se">\t\t</span><span class="s">å®Œæˆåº¦ï¼š"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span>
                <span class="nb">int</span><span class="p">((</span><span class="n">count</span> <span class="o">/</span> <span class="p">(</span><span class="n">TOTAL</span> <span class="o">*</span> <span class="mi">60</span><span class="p">))</span> <span class="o">*</span> <span class="mi">10000</span><span class="p">)</span> <span class="o">/</span> <span class="mi">100</span><span class="p">)</span> <span class="o">+</span> <span class="s">"%"</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"* * * * * å•†å“ä¿¡æ¯æ— æ³•å¤„ç†ï¼Œé“¾æ¥ï¼š"</span><span class="p">,</span> <span class="n">link</span><span class="p">)</span>
            <span class="k">global</span> <span class="n">fail_links</span>
            <span class="n">fail_links</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">å¼€å§‹å¤„ç†å•†å“..."</span><span class="p">)</span>
    <span class="n">start</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">end</span> <span class="o">=</span> <span class="n">start</span> <span class="o">+</span> <span class="n">TOTAL</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
        <span class="n">get_url_price_and_comment</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">while</span> <span class="n">links</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="n">get_product</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">retry_products</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">--------æ­£åœ¨é‡æ–°å¤„ç†é”™è¯¯å•†å“--------"</span><span class="p">)</span>
            <span class="k">while</span> <span class="n">retry_products</span> <span class="o">!=</span> <span class="p">[]:</span>
                <span class="n">retry_product</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">ç¬¬"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s">"é¡µå¤„ç†å®Œæˆ"</span><span class="p">)</span>

    <span class="k">while</span> <span class="n">retry_index</span> <span class="o">!=</span> <span class="p">[]:</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">retry_index</span><span class="p">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">get_url_price_and_comment</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">retry_products</span> <span class="o">!=</span> <span class="p">[]:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">--------æ­£åœ¨é‡æ–°å¤„ç†é”™è¯¯å•†å“--------"</span><span class="p">)</span>
            <span class="k">while</span> <span class="n">retry_products</span> <span class="o">!=</span> <span class="p">[]:</span>
                <span class="n">retry_product</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">ç¬¬"</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">+</span> <span class="s">"é¡µå¤„ç†å®Œæˆ"</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="s">"**************æ‰€æœ‰å•†å“é“¾æ¥å¤„ç†å®Œæˆ**************"</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>

</code></pre></div></div>
:ET